{% extends "base.html" %}

{% block content %}
<div class="main-container">
    <h1>HCSC Shared Services SOP Generator</h1>
    <p class="subtitle">Generate ISO 9000 compliant Standard Operating Procedures</p>

    <div class="form-container">
        <form id="sopForm" method="POST" action="{{ url_for('generate_sop') }}">
            <div class="sop-header">
                <div class="mb-4">
                    <label for="template" class="form-label">Select Template</label>
                    <select class="form-control" id="template" name="template_id" required>
                        {% for template in templates %}
                        <option value="{{ template.id }}"{% if template.is_default %} selected{% endif %}>{{ template.name }}</option>
                        {% endfor %}
                    </select>
                </div>
                <div class="mb-4">
                    <label for="title" class="form-label">Title of SOP</label>
                    <input type="text" class="form-control" id="title" name="title" required>
                </div>

                <div class="row mb-4">
                    <div class="col-md-4">
                        <label for="document_id" class="form-label">Document ID</label>
                        <input type="text" class="form-control" id="document_id" name="document_id" readonly>
                    </div>
                    <div class="col-md-4">
                        <label for="effective_date" class="form-label">Effective Date</label>
                        <input type="date" class="form-control" id="effective_date" name="effective_date" required>
                    </div>
                    <div class="col-md-4">
                        <label for="version" class="form-label">Version</label>
                        <input type="text" class="form-control" id="version" name="version" value="1.1" required>
                    </div>
                </div>
            </div>

            <div class="summary-section mb-4">
                <label for="summary" class="form-label">Provide SOP Summary</label>
                <textarea class="form-control" id="summary" name="summary" rows="8" placeholder="Enter your SOP summary here..." required></textarea>
            </div>

            <div class="contact-section mb-4">
                <h4>Contact Information</h4>
                <!-- IT Delivery Team -->
                <div class="row mb-4">
                    <div class="col-12">
                        <div class="contact-group">
                            <input type="text" class="form-control mb-3" name="it_team_name" value="HC IT Delivery Team" placeholder="Team Name">
                            <h5>IT Team Contacts</h5>
                            {% for i in range(1, 4) %}
                            <div class="contact-entry mb-3">
                                <input type="text" class="form-control mb-2" name="it_contact{{i}}_name" placeholder="Contact {{i}} Name">
                                <input type="text" class="form-control mb-2" name="it_contact{{i}}_role" placeholder="Contact {{i}} Role">
                                <input type="email" class="form-control mb-2" name="it_contact{{i}}_email" placeholder="Contact {{i}} Email">
                                <input type="tel" class="form-control mb-2" name="it_contact{{i}}_phone" placeholder="Contact {{i}} Phone">
                            </div>
                            {% endfor %}
                        </div>
                    </div>
                </div>
                
                <!-- Payroll Support -->
                <div class="row mb-4">
                    <div class="col-12">
                        <div class="contact-group">
                            <input type="text" class="form-control mb-3" name="payroll_team_name" value="HCSC Payroll Support" placeholder="Team Name">
                            <h5>Payroll Support Contacts</h5>
                            {% for i in range(1, 4) %}
                            <div class="contact-entry mb-3">
                                <input type="text" class="form-control mb-2" name="payroll_contact{{i}}_name" placeholder="Contact {{i}} Name">
                                <input type="text" class="form-control mb-2" name="payroll_contact{{i}}_role" placeholder="Contact {{i}} Role">
                                <input type="email" class="form-control mb-2" name="payroll_contact{{i}}_email" placeholder="Contact {{i}} Email">
                                <input type="tel" class="form-control mb-2" name="payroll_contact{{i}}_phone" placeholder="Contact {{i}} Phone">
                            </div>
                            {% endfor %}
                        </div>
                    </div>
                </div>
            </div>

            <!-- Authorization Section -->
            <div class="authorization-section mb-4">
                <h4>Authorization</h4>
                <div class="row">
                    <div class="col-md-6 mb-3">
                        <div class="auth-group">
                            <h5>Process Owner</h5>
                            <input type="text" class="form-control mb-2" name="process_owner_name" placeholder="Name & Surname">
                            <input type="text" class="form-control" name="process_owner_role" placeholder="Role">
                        </div>
                    </div>
                    <div class="col-md-6 mb-3">
                        <div class="auth-group">
                            <h5>Area Head</h5>
                            <input type="text" class="form-control mb-2" name="area_head_name" placeholder="Name & Surname">
                            <input type="text" class="form-control" name="area_head_role" placeholder="Role">
                        </div>
                    </div>
                </div>
            </div>

            <div class="text-center">
                <button type="submit" class="btn btn-primary btn-lg">Generate SOP</button>
            </div>
        </form>
    </div>
</div>
{% endblock %}
